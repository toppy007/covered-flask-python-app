<div id="ana_cre_create">

<br id="createCover"/>
  <h3 align="left">Create your tailored supporting covering letter</h3>
<br />

<form action="{{ url_for('views.ana_cre_main') }}" method="post">
  <button type="button" id="toggleFormBtn" class="btn btn-primary mb-3">Create Optimised Covering Letter</button>

    <div class="form-group" id="projectForm">
    <h5 align="left">Passages you want to include</h5>
    <select id="selectTag" class="form-control mb-3">
      <option disabled selected value="">Select Passages</option>
      {% for note in user.notes %}
      <option value="{{ note.data }}">{{ note.data }}</option>
      {% endfor %}
    </select>
  <div>
    <input type="hidden" name="selectedNotes" id="selectedNotesInput" />
</div>
<div>
<button type="button" class="btn btn-primary" onclick="addSelectedNote()">Add</button>
</div>
  <div class="mt-3">
    <div id="selectedTags">
      <!-- Selected skill tags will be displayed here -->
    </div>
  </div>
  <br />

  <h5>Selected word count for covering letter:</h5>

  <div class="form-group">
    <div class="form-check">
      <input
        class="form-check-input"
        type="radio"
        name="flexRadioDefault"
        id="flexRadioDefault1"
        value="50"
      />
      <label class="form-check-label" for="flexRadioDefault1"> 0 - 50 </label>
    </div>
    <div class="form-check">
      <input
        class="form-check-input"
        type="radio"
        name="flexRadioDefault"
        id="flexRadioDefault2"
        checked
        value="100"
      />
      <label class="form-check-label" for="flexRadioDefault2"> 51 - 100 </label>
    </div>
    <!-- Add more radio buttons for other word count ranges -->
    <div class="form-check">
      <input
        class="form-check-input"
        type="radio"
        name="flexRadioDefault"
        id="flexRadioDefault3"
        value="150"
      />
      <label class="form-check-label" for="flexRadioDefault3">
        101 - 150
      </label>
    </div>
    <div class="form-check">
      <input
        class="form-check-input"
        type="radio"
        name="flexRadioDefault"
        id="flexRadioDefault4"
        value="200"
      />
      <label class="form-check-label" for="flexRadioDefault4">
        151 - 200
      </label>
    </div>
  </div>
  <div>
    <button type="submit" name="create" class="btn btn-primary" onclick="printSelection()">Create</button>
  </div>
</div>
</div>

<script>
    function addSelectedNote() {
      const selectTag = document.getElementById("selectTag");
      const selectedNotes = selectTag.value;
  
      const selectedSkillsInput = document.getElementById("selectedNotesInput");
      selectedNotesInput.value += selectedNotes + ",";
  
      selectTag.querySelector(`option[value="${selectedNotes}"]`).remove();
      const selectedTagsDiv = document.getElementById("selectedTags");
      const tagContainer = document.createElement("div");
      tagContainer.className = "badge badge-secondary mr-1";
  
      const tagText = document.createElement("span");
      tagText.textContent = selectedNotes;
      tagContainer.appendChild(tagText);
  
      const deleteButton = document.createElement("span");
      deleteButton.innerHTML = "&times;";
      deleteButton.className = "ml-2";
      deleteButton.style.cursor = "pointer";
      deleteButton.onclick = function () {
        selectedTagsDiv.removeChild(tagContainer);
        selectTag.innerHTML += `<option value="${selectedNotes}">${selectedNotes}</option>`;
        $(noteInput).tagsinput("remove", selectedNotes);
      };
  
      tagContainer.appendChild(deleteButton);
      selectedTagsDiv.appendChild(tagContainer);
    }
  
    function printSelection() {
      const selectedNotes = document.getElementById("selectedNotesInput").value;
      const jobAdContent = document.getElementById("job_ad").value;
      const wordCountRadios = document.querySelectorAll('input[name="flexRadioDefault"]');
      let selectedWordCountRange;
      for (const radio of wordCountRadios) {
        if (radio.checked) {
          selectedWordCountRange = radio.value;
          break;
        }
      }
    }
</script>