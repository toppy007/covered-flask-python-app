
<div class="container mt-3">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Company Name</th>
                <th>Position</th>
                <th>Recruiter's Name</th>
                <th>CL</th>
                <th>Job Ad</th>
                <th>Date</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            {% for history_entry in job_history_data %}
                <tr>
                    <td>{{ history_entry.company_name }}</td>
                    <td>{{ history_entry.position }}</td>
                    <td>{{ history_entry.recruiters_name }}</td>
                    <td>
                        <button class="btn btn-primary popup-button" data-toggle="modal" data-target="#myModal-{{ history_entry.id }}">View</button>
                        <div class="modal fade" id="myModal-{{ history_entry.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="myModalLabel">Covering Letter</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        {{ history_entry.covering_letter }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-primary popup-button" data-toggle="modal" data-target="#myModal-{{ history_entry.id }}">View</button>
                    </td>
                    <td>{{ history_entry.timestamp }}</td>
                    <td>
                        <button type="button" class="btn btn-danger" onclick="deleteApplication({{ history_entry.id }})">
                            Delete
                        </button>
                </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>

document.addEventListener("DOMContentLoaded", function() {
    const popupButtons = document.querySelectorAll(".popup-button");
    const overlay = document.getElementById("overlay");
    const popup = document.getElementById("popup");
    const popupContent = document.getElementById("popup-content");
    const closePopupButton = document.getElementById("close-popup");

    popupButtons.forEach(function(button) {
        button.addEventListener("click", function() {
            const text = button.getAttribute("data-text");

            popupContent.textContent = text;

            overlay.style.display = "block";
            popup.style.display = "block";
        });
    });

    closePopupButton.addEventListener("click", function() {
        overlay.style.display = "none";
        popup.style.display = "none";
    });
});

</script>
